<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>IASC-NZSA 2017 | Predicting Bus Arrival</title>
    <link rel="stylesheet" href="assets/css/app.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
        integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
        crossorigin=""/>
  </head>
  <body>
    <div id="aklMap"></div>
    <div class="reveal">
      <div class="slides">

        <section data-state="titlepage" class="titlepage" data-transition="slide">
          <!-- <h3 class="cursive stretch">Predicting bus arrival times using estimated road network state</h3> -->
          <h4 class="cursive stretch">
            Real-time transit network modelling for improved arrival time predictions
            <div style="margin-top: 1em"><small>IASC-NZSA 2017</small></div>
          </h4>

          <div class="bottom left">
            <img src="assets/img/uoa.png" alt="University of Auckland" width="260" class="bare">
          </div>
          <div class="bottom right">
            <ul class="list-unstyled text-right">
              Tom Elliott<br>
              <li class="small"><a href="">tomelliott.co.nz/talks/nzsa2017</a></li>
              <li class="small">Twitter/Github: <a href="">tmelliott</a></li>
            </ul>
          </div>
        </section>

        <section data-state="realtimebuses" data-transition="slide">
          <p class="stretch"></p>
          <p class="small">Approx. real-time positions 
            <span class="fragment"><em>for all of Auckland!</em></span>
          </p>
        </section>
      
        <section data-state="theProblem">
          <h2>Part 1</h2>
          <h3>Motivation</h3>
          <p class="cursive">What's wrong with the current system?</p>
        </section>

        <section data-state="currentETAs">
          <p class="cursive text-left">
            Currently, it works like this &hellip;
          </p>
          <ol class="cursive">
            <li class="fragment">Bus arrives at a stop, delay is recorded</li>
            <li class="fragment">ETA = scheduled arrival time + delay</li>
            <li class="fragment">Repeat for all stops until it reaches yours &hellip;<br>
            </li>
          </ol>
          <span class="hideme fragment">stop3</span>
          <span class="hideme fragment">stop4</span>

          <div id="ETA1" class="etagraph stretch"></div>
        </section>

        <section data-state="etagraphOld">
          <p class="text-left">ETAs for a person waiting at the 7:40 stop:</p>
          <div id="ETAgraph" class="etagraph stretch"></div>
          <ul class="text-left">
            <li>Initial expected waiting time: <span class="">10 minutes</span>
              <span class="fragment"></span>
            </li>
            <li>Actual waiting time: <span  class="fragment emph">16 minutes</span></li>
          </ul>
        </section>

        <section data-state="ourSolution">
          <h2>Part 2</h2>
          <h3>Proposed predictive framework</h3>
          <ol>
            <li class="fragment">Improved vehicle state model (speed)</li>
            <li class="fragment">Network state model (road travel times)</li>
            <li class="fragment">Predict arrival times using vehicle + network states</li>
          </ol>
        </section>

        <section data-state="busmodel" data-transition="slide-in fade-out">
          <h4>1. Bus model: particle filter</h4>

          <p class="stretch"></p>
          <!-- <p>Advantages</p> -->
          <ul>
            <li class="fragment list-tick"><strong>Flexibility</strong>: asymmetry, multimodality</li>
            <li class="fragment list-tick"><strong>Intuitive likelihood</strong>: distance between two points</li>
            <li class="fragment list-tick"><strong>Transition function</strong>: explicitly model bus behaviour</li>

            <li class="fragment list-cross" style="margin-top: 1em"><strong>Computationally demanding</strong></li>
          </ul>
          <p class="stretch"></p>
        </section>

        <section data-state="busmodel2" data-transition="fade">
            <h4 class="">1. Bus model: particle filter</h4>
            <div class="smaller">
              <p style="margin-top: 2em; margin-left: 30%" class="text-left">
                <span class="fragment" data-fragment-index="1">$ X_k = \begin{bmatrix} d_k \\ v_k \end{bmatrix} $</span>
                <span class="fragment" data-fragment-index="5">$ = f(X_{k-1}) $</span>
              </p>
              <p class="text-left" style="margin-left: 30%">
                <span class="fragment" data-fragment-index="2"><span style="color: orangered">$ Y_k $</span> 
                  $ = \begin{bmatrix} \phi_k \\ \lambda_k \end{bmatrix} $</span>
                <span class="fragment" data-fragment-index="3">$ = h(X_k) $</span>
              </p>
            </div>
            <ul class="list-unstyled hidden">
              <li class="fragment" data-fragment-index="4">Let them travel independently until new observation recieved</li>
              <li class="fragment" data-fragment-index="7">"Bootstrap resample" based on proximity to real bus</li>
              <li class="fragment" data-fragment-index="8">Travel &hellip;</li>
              <li class="fragment" data-fragment-index="9">Resample &hellip;</li>
              <li class="fragment" data-fragment-index="10">Travel &hellip;</li>
              <li class="fragment" data-fragment-index="11">Resample &hellip;</li>
              <li class="fragment" data-fragment-index="12">Travel &hellip;</li>
            </ul>
            <p class="stretch"></p>
            <div class="smaller" style="margin-left: 30%">
              <p class="text-left">
                <span class="fragment" data-fragment-index="6">
                  $ Y_k | X_k^{(i)}, \Sigma \sim \mathrm{Binormal}(h(X_k^{(i)}), \Sigma) $
                  <!-- $ g\left[h(X^{(i)}_k) | Y_k\right] \sim 
                  \mathrm{Binormal}(0, \Sigma) $ -->
                </span>
              </p>
              <p class="text-left">
                <span class="fragment" data-fragment-index="7">
                  $ w_i = \frac{\ell(X_k^{(i)} | Y_k, \Sigma)}{\sum_j \ell(X_k^{(j)} | Y_k, \Sigma)} $
                </span>
              </p>
            </p>
        </section>

        <section data-state="busmodel3" data-transition="fade-in slide-out">
          <h4 class="cursive">1. Bus model: particle filter</h4>
          <p class="cursive text-left">All we need to do is &hellip;</p>
          <div class="boxed">
            <ul class="text-left">
              <li class="fragment">Model all buses in Auckland (1000+ at peak hour)</li>
              <li class="fragment">In real-time, target is 30 seconds or faster<br><br></li>
              <li class="fragment">Goodbye R, hello C++</li>
            </ul>
          </div>
          <p class="stretch"></p>
        </section>

        <section data-state="networkmodel" data-transition="slide-in fade-out">
          <h4 class="">2. Network Model</h4>
          <ul class="text-left cursive">
            <li class="fragment">Road segment = stretch of road between two intersections</li>
            <li class="fragment">Independent of route</li>
            <li class="fragment" style="margin-top: 1em">Network state parameters: <br>
              $\tau_\ell$ = travel time along segment $\ell$<br>
              $\xi_\ell$ = variance of travel time along segment $\ell$
            </li>
            <li class="fragment">Data = estimated travel time of buses along segment</li>
            <li class="fragment" style="margin-top: 1em">
              Implemented using Kalman filter
            </li>
          </ul>
          <p class="stretch"></p>
        </section>

        <section data-state="segSpeeds" data-transition="fade-in slide-out">
          <h4 class="">2. Network Model</h4>
          <p class="stretch"></p>
          <ol class="">
            <li class="fragment">Model all buses in real time</li>
            <li class="fragment">Update network state as buses traverse segments</li>
          </ol>
        </section>

        <section data-state="prediction">
          <h4>3: Arrival time prediction</h4>
  
          <ul>
            <li class="fragment">ETA = sum road segment travel times</li>
            <li class="fragment">Calculate ETA for each particle<br>
              <small>Simulate travel times, stop/traffic light wait times, etc</small>
            </li>
            <li class="fragment"><strong>ETA distribution</strong> incorporates remaining uncertainty</li>
            <li class="fragment"><strong>Prediction intervals</strong> to communicate to commuters<br> 
              e.g., 10-16 minutes vs. 12 minutes</li>
            <li class="fragment" style="margin-top: 1em"><strong>Future Work</strong>: journey planning?</li>
          </ul>        

          <p class="stretch"></p>
        </section>

        <section data-state="end" class="titlepage" data-transition="slide-in fade-out">
          <h4 class="stretch"></h4>
        
          <p class="top right">Questions?</p>

          <!-- <p class="stretch"></p> -->
          <div class="bottom right">
            <ul class="list-unstyled text-right">
              <!-- Tom Elliott<br> -->
              <li class="small">Slides available: <a href="">tomelliott.co.nz/talks/nzsa2017</a></li>
              <!-- <li class="small">Twitter/Github: <a href="">tmelliott</a></li> -->
            </ul>
          </div>
        </section>

        <section data-state="thanks" data-transition="fade">
          <h2>Thank You</h2>
        </section>
      </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
      integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
      crossorigin=""></script>
    <script src="assets/js/app.min.js"></script>
  </body>
</html>
